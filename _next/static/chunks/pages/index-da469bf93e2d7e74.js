(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return l(1641)}])},1641:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return S}});var a={};l.r(a);var s=l(5893),r=l(7294);l(1536),l(4715),l(9984),l(7017),l(5615),l(8793),l(4570),l(8042),l(2775),l(723),l(1712),l(8660),l(2054),l(4489),l(2514);var n=l(3349),i=l(7977),d=l(2547),c=l(5433),o=l(3034),m=l(348),x=l(4671),h=l(6008),g=l(905),p=l(2664),u=l(382),b=l(9387),f=l(2471),j=l(4391),y=l(6672),N=l(1382),w=l(2379),v=l(5618);function S(){let[e,t]=(0,r.useState)(""),[l,S]=(0,r.useState)([]),[C,k]=(0,r.useState)([]),[T,A]=(0,r.useState)("bar"),[_,Z]=(0,r.useState)(!1),[L,D]=(0,r.useState)(!1),[J,R]=(0,r.useState)(!1),[O,E]=(0,r.useState)({name:"",type:"number"}),[P,F]=(0,r.useState)(""),[I,z]=(0,r.useState)(!1),[M,U]=(0,r.useState)([]),[X,q]=(0,r.useState)(0),[G,K]=(0,r.useState)(""),[Y,B]=(0,r.useState)({}),[H,Q]=(0,r.useState)(!1),[V,W]=(0,r.useState)([]),[$,ee]=(0,r.useState)("home"),[et,el]=(0,r.useState)(null),ea=(0,r.useRef)(null),es={quality:{name:"品質管理ダッシュボード",description:"不良率、品質スコア、検査結果の分析",preferredFields:["不良","品質","検査","良品","スコア","判定"],chartType:"composed",memo:"品質管理の可視化により、不良品の早期発見と品質向上を実現できます。\n• 不良率の推移監視\n• 品質基準値との比較\n• 検査結果のトレンド分析"},production:{name:"生産効率分析",description:"生産数、稼働率、作業時間の最適化",preferredFields:["生産","稼働","作業時間","効率","数量","SPM"],chartType:"bar",memo:"生産効率の見える化により、ボトルネックの特定と改善が可能です。\n• 生産数の日次推移\n• 設備稼働率の監視\n• 作業時間の最適化"},maintenance:{name:"設備保全レポート",description:"温度、振動、稼働時間の監視",preferredFields:["温度","湿度","ショット","累計","稼働","点検"],chartType:"line",memo:"予防保全により設備の長寿命化とダウンタイム削減を実現します。\n• 設備状態の常時監視\n• 保全タイミングの最適化\n• 異常予兆の早期検知"}},er=e=>{if(console.log("JSON処理を開始:",e),!e||""===e.trim()){S([]),D(!1);return}D(!0);try{let t=JSON.parse(e);console.log("JSON解析成功:",t),S([{id:"test1",name:"テスト項目1",type:"string"},{id:"test2",name:"テスト項目2",type:"number"}]),D(!1)}catch(e){console.error("JSON解析エラー:",e),S([]),D(!1)}},en=e=>{S(t=>t.filter(t=>t.id!==e)),k(t=>t.filter(t=>t!==e))},ei=e=>{k(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},ed=e=>{let t=es[e],a=l.filter(e=>t.preferredFields.some(t=>e.name.toLowerCase().includes(t.toLowerCase()))),s=[];if(a.length>0){let e=l.find(e=>"date"===e.type||e.name.toLowerCase().includes("日")||e.name.toLowerCase().includes("date")||e.name.toLowerCase().includes("time"));if(e&&!a.includes(e))s=[e.id,...a.map(e=>e.id)];else if(e){let t=a.filter(t=>t.id!==e.id);s=[e.id,...t.map(e=>e.id)]}else{let e={id:"dummy_date",name:"作業日（サンプル）",type:"date"};S(t=>[e,...t]),s=[e.id,...a.map(e=>e.id)]}k(s),A(t.chartType),F(t.memo)}else{let e=[{id:"dummy_date",name:"作業日（サンプル）",type:"date"},...t.preferredFields.slice(0,3).map((e,t)=>({id:"dummy_"+e.toLowerCase().replace(/[^a-zA-Z0-9]/g,"_"),name:e+"（サンプル）",type:"number"}))];S(t=>[...t,...e]),k(e.map(e=>e.id)),A(t.chartType),F(t.memo)}Z(!0)},ec=async()=>new Promise(e=>{let t=document.querySelector(".recharts-wrapper svg");if(!t){let t=document.createElement("canvas"),l=t.getContext("2d");t.width=400,t.height=300,l.fillStyle="white",l.fillRect(0,0,t.width,t.height),l.fillStyle="#1f2937",l.font="bold 16px Arial",l.textAlign="center";let a={bar:"棒グラフ",line:"折れ線グラフ",pie:"円グラフ",composed:"複合グラフ",table:"表"}[T]||"グラフ";l.fillText(a,t.width/2,t.height/2),l.font="12px Arial",l.fillStyle="#6b7280",l.fillText(new Date().toLocaleString("ja-JP"),t.width/2,t.height/2+30),e(t.toDataURL());return}let l=new XMLSerializer().serializeToString(t),a=document.createElement("canvas"),s=a.getContext("2d");a.width=400,a.height=300;let r=new Image;r.onload=function(){s.fillStyle="white",s.fillRect(0,0,a.width,a.height);let t=Math.min(a.width/r.width,a.height/r.height),l=(a.width-r.width*t)/2,n=(a.height-r.height*t)/2;s.drawImage(r,l,n,r.width*t,r.height*t),e(a.toDataURL())},r.onerror=function(){s.fillStyle="white",s.fillRect(0,0,a.width,a.height),s.fillStyle="#1f2937",s.font="bold 16px Arial",s.textAlign="center",s.fillText("グラフ画像",a.width/2,a.height/2),e(a.toDataURL())},r.src="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(l)))}),eo=async()=>{if(!G.trim()){alert("プロジェクト名を入力してください");return}let e=prompt("パターン名を入力してください","パターン"+(M.length+1));if(e){let t=await ec(),l=[...M,{id:Date.now().toString(),name:e,selectedFields:[...C],chartType:T,memo:P,alertSettings:{...Y},timestamp:new Date().toLocaleString("ja-JP"),chartImage:t}];U(l),em(l)}},em=t=>{let a={id:G.replace(/[^a-zA-Z0-9]/g,"_").toLowerCase(),name:G,jsonData:e,extractedFields:l,patterns:t,savedAt:new Date().toLocaleString("ja-JP"),lastModified:new Date().toLocaleString("ja-JP")};W(e=>{let t=e.findIndex(e=>e.id===a.id);if(!(t>=0))return[...e,a];{let l=[...e];return l[t]=a,l}})},ex=e=>{e.chartImage?window.open("","_blank").document.write("\n        <html>\n          <head><title>".concat(e.name,' - 拡大プレビュー</title></head>\n          <body style="margin: 0; padding: 20px; text-align: center; background: #f9fafb;">\n            <h2>').concat(e.name,"</h2>\n            <p>作成日時: ").concat(e.timestamp,'</p>\n            <img src="').concat(e.chartImage,'" style="max-width: 100%; border: 1px solid #ddd; border-radius: 8px;"/>\n          </body>\n        </html>\n      ')):alert("チャート画像が保存されていません")},eh=(e,t)=>{let l=document.createElement("canvas"),a=l.getContext("2d");l.width=800,l.height=600,a.fillStyle="white",a.fillRect(0,0,l.width,l.height),a.fillStyle="#1f2937",a.font="bold 24px Arial",a.textAlign="center",a.fillText("".concat(e," - ").concat(t.name),l.width/2,50),a.font="16px Arial",a.fillText("作成日時: ".concat(t.timestamp),l.width/2,80),a.fillText("グラフタイプ: ".concat(t.chartType),l.width/2,110);let s=document.createElement("a");s.download="".concat(e,"_").concat(t.name,"_").concat(new Date().toLocaleDateString("ja-JP"),".png"),s.href=l.toDataURL(),s.click()},eg=(e,t,l)=>{B(a=>({...a,[e]:{min:parseFloat(t)||null,max:parseFloat(l)||null}}))},ep=async()=>{z(!0);try{let e=document.createElement("canvas"),t=e.getContext("2d");e.width=1200,e.height=1600,t.fillStyle="white",t.fillRect(0,0,e.width,e.height),t.fillStyle="#1f2937",t.font="bold 24px Arial",t.textAlign="center";let a={bar:"棒グラフ",line:"折れ線グラフ",pie:"円グラフ",composed:"複合グラフ",table:"表"}[T];t.fillText("データ可視化 - "+a,e.width/2,40),G&&(t.font="16px Arial",t.fillStyle="#6b7280",t.fillText("プロジェクト: "+G,e.width/2,70)),t.font="16px Arial",t.textAlign="left",t.fillStyle="#1f2937",t.fillText("選択項目:",50,100);let s=120;C.forEach(e=>{let a=l.find(t=>t.id===e);a&&(t.fillText("• "+a.name+" ("+a.type+")",70,s),s+=25)});let r=s+20;t.strokeStyle="#e5e7eb",t.strokeRect(50,r,e.width-100,400),t.fillStyle="#f3f4f6",t.fillRect(51,r+1,e.width-102,398),t.fillStyle="#6b7280",t.font="18px Arial",t.textAlign="center",t.fillText("チャートエリア",e.width/2,r+200),t.fillText("("+a+")",e.width/2,r+200+30);let n=r+400+40;t.fillStyle="#1f2937",t.font="bold 18px Arial",t.textAlign="left",t.fillText("メモ・要望:",50,n),t.strokeStyle="#d1d5db",t.strokeRect(50,n+10,e.width-100,200),t.fillStyle="#f9fafb",t.fillRect(51,n+11,e.width-102,198),t.fillStyle="#374151",t.font="14px Arial";let i=P.split("\n"),d=n+35;i.forEach(e=>{t.fillText(e,70,d),d+=20}),t.fillStyle="#6b7280",t.font="12px Arial",t.textAlign="center";let c=new Date,o=c.toLocaleDateString("ja-JP")+" "+c.toLocaleTimeString("ja-JP");t.fillText("作成日時: "+o,e.width/2,e.height-20);let m=document.createElement("a"),x=(G?G+"_":"")+"データ可視化_"+a+"_"+c.getFullYear()+String(c.getMonth()+1).padStart(2,"0")+String(c.getDate()).padStart(2,"0")+".png";m.download=x,m.href=e.toDataURL(),m.click()}catch(e){console.error("エクスポートエラー:",e),alert("エクスポートに失敗しました")}z(!1)};return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6 text-gray-900",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("header",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"帳票データ可視化アプリケーション"}),(0,s.jsx)("p",{className:"text-gray-900",children:"JSONデータから自動で項目を抽出し、お客様とのすり合わせ用グラフ・表を生成"}),(0,s.jsxs)("div",{className:"flex justify-center gap-4 mt-6",children:[(0,s.jsxs)("button",{onClick:()=>ee("home"),className:"nav-button ".concat("home"===$?"active":""),children:[(0,s.jsx)(i.Z,{className:"h-5 w-5 mr-2"}),"ホーム"]}),(0,s.jsxs)("button",{onClick:()=>ee("history"),className:"nav-button ".concat("history"===$?"active":""),children:[(0,s.jsx)(d.Z,{className:"h-5 w-5 mr-2"}),"プロジェクト履歴"]})]})]}),"home"===$?(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,s.jsxs)("div",{className:"project-header",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold flex items-center",children:[(0,s.jsx)(c.Z,{className:"mr-2"}),(0,s.jsx)("span",{className:"text-gray-900",children:"プロジェクト管理"})]}),(0,s.jsxs)("button",{onClick:()=>{if((C.length>0||P.trim()||Object.keys(Y).length>0)&&G.trim()){if(!window.confirm("現在の作業内容をプロジェクト「".concat(G,"」に保存してからリセットしますか？\n\n")+"「OK」: 保存してリセット\n「キャンセル」: リセットせずに作業を続ける"))return;if(C.length>0){let e="作業中パターン_"+new Date().toLocaleTimeString("ja-JP");em([...M,{id:Date.now().toString(),name:e,selectedFields:[...C],chartType:T,memo:P,alertSettings:{...Y},timestamp:new Date().toLocaleString("ja-JP"),exportedImage:null}])}else M.length>0&&em(M)}K(""),t(""),S([]),k([]),U([]),A("bar"),F(""),B({}),Z(!1),R(!1),Q(!1),D(!1),alert("新しいプロジェクトを開始できます")},className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[(0,s.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"新しいプロジェクトを開始"]})]}),(0,s.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,s.jsx)("input",{type:"text",value:G,onChange:e=>K(e.target.value),placeholder:"プロジェクト名を入力（例: A社_品質改善_2024）",className:"flex-1 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),M.length>0&&(0,s.jsxs)("div",{className:"text-sm text-gray-900",children:["保存済みパターン: ",M.length,"個"]})]})]}),(0,s.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 json-file-section",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold mb-6 flex items-center justify-center",children:[(0,s.jsx)(m.Z,{className:"mr-2"}),"JSONデータ取り込み"]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("button",{onClick:()=>{var e;return null===(e=ea.current)||void 0===e?void 0:e.click()},className:"file-input-label w-full bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center",children:[(0,s.jsx)(x.Z,{className:"h-5 w-5 mr-2"}),"JSONファイルを選択"]}),(0,s.jsx)("div",{className:"text-center text-gray-800 text-sm",children:"または"}),(0,s.jsx)("textarea",{value:e,onChange:e=>t(e.target.value),className:"w-full h-40 p-4 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"JSONデータを直接入力してください..."}),(0,s.jsx)("button",{onClick:()=>{e.trim()&&er(e)},className:"mt-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"JSONを解析"})]}),(0,s.jsx)("input",{ref:ea,type:"file",accept:".json",onChange:e=>{let l=e.target.files[0];if(l){let e=new FileReader;e.onload=e=>{t(e.target.result),er(e.target.result)},e.readAsText(l)}},className:"hidden"})]})}),l.length>0&&(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[(0,s.jsx)(h.Z,{className:"mr-2"}),"提案テンプレート"]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(es).map(e=>{let[t,l]=e;return(0,s.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("h3",{className:"font-semibold text-lg mb-2",children:l.name}),(0,s.jsx)("p",{className:"text-gray-900 text-sm mb-3",children:l.description}),(0,s.jsx)("button",{onClick:()=>ed(t),className:"w-full bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:"このテンプレートを適用"})]},t)})})]}),(l.length>0||L)&&(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold flex items-center",children:[(0,s.jsx)(g.Z,{className:"mr-2"}),"抽出された項目",L&&(0,s.jsx)("span",{className:"ml-2 text-blue-600",children:"解析中..."})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{onClick:()=>R(!J),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center",children:[(0,s.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"項目追加"]}),(0,s.jsxs)("button",{onClick:()=>Q(!H),className:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors flex items-center",children:[(0,s.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"異常値設定"]})]})]}),J&&(0,s.jsx)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:(0,s.jsxs)("div",{className:"flex gap-4 items-end",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"項目名"}),(0,s.jsx)("input",{type:"text",value:O.name,onChange:e=>E({...O,name:e.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"例: 作業効率, 検査回数"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"データ型"}),(0,s.jsxs)("select",{value:O.type,onChange:e=>E({...O,type:e.target.value}),className:"p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"number",children:"数値"}),(0,s.jsx)("option",{value:"string",children:"文字列"}),(0,s.jsx)("option",{value:"date",children:"日付"})]})]}),(0,s.jsx)("button",{onClick:()=>{if(O.name.trim()){let e={id:O.name.replace(/[^a-zA-Z0-9]/g,"_").toLowerCase(),name:O.name,type:O.type};S(t=>[...t,e]),E({name:"",type:"number"}),R(!1)}},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"追加"})]})}),H&&(0,s.jsxs)("div",{className:"mb-6 p-4 bg-orange-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-medium mb-3",children:"異常値検知設定"}),(0,s.jsx)("div",{className:"space-y-3",children:l.filter(e=>"number"===e.type).map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("span",{className:"w-32 text-sm font-medium",children:[e.name,":"]}),(0,s.jsx)("input",{type:"number",placeholder:"下限値",className:"w-20 p-1 border border-gray-300 rounded text-sm",onChange:t=>{var l;return eg(e.id,t.target.value,null===(l=Y[e.id])||void 0===l?void 0:l.max)}}),(0,s.jsx)("span",{className:"text-gray-800",children:"〜"}),(0,s.jsx)("input",{type:"number",placeholder:"上限値",className:"w-20 p-1 border border-gray-300 rounded text-sm",onChange:t=>{var l;return eg(e.id,null===(l=Y[e.id])||void 0===l?void 0:l.min,t.target.value)}})]},e.id))}),(0,s.jsx)("div",{className:"mt-3 p-2 bg-blue-100 rounded",children:(0,s.jsx)("p",{className:"text-sm text-blue-800",children:"\uD83D\uDCA1 ヒント: 異常値の参照線がグラフに表示されます"})})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-6",children:l.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[(0,s.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer flex-1",children:[(0,s.jsx)("input",{type:"checkbox",checked:C.includes(e.id),onChange:()=>ei(e.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:e.name}),(0,s.jsx)("span",{className:"ml-2 text-xs text-gray-800 bg-gray-100 px-2 py-1 rounded",children:e.type}),Y[e.id]&&(0,s.jsx)(n.Z,{className:"inline h-3 w-3 ml-1 text-orange-500"})]})]}),(0,s.jsx)("button",{onClick:()=>en(e.id),className:"ml-2 text-red-500 hover:text-red-700 transition-colors",children:(0,s.jsx)(b.Z,{className:"h-4 w-4"})})]},e.id))}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"可視化タイプ選択"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[{type:"bar",icon:f.Z,name:"棒グラフ"},{type:"line",icon:j.Z,name:"折れ線グラフ"},{type:"pie",icon:y.Z,name:"円グラフ"},{type:"composed",icon:f.Z,name:"複合グラフ"},{type:"table",icon:a.Grid3X3,name:"表"}].map(e=>{let{type:t,icon:l,name:a}=e;return(0,s.jsxs)("button",{onClick:()=>A(t),className:"p-3 rounded-lg border-2 transition-all "+(T===t?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"),children:[(0,s.jsx)(l,{className:"h-6 w-6 mx-auto mb-1"}),(0,s.jsx)("div",{className:"text-sm font-medium",children:a})]},t)})})]}),(0,s.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("h3",{className:"font-medium mb-3 flex items-center",children:[(0,s.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"お客様からの要望・メモ"]}),(0,s.jsx)("textarea",{value:P,onChange:e=>F(e.target.value),className:"w-full h-32 p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"お客様からの要望や気づいた点をメモしてください..."}),(0,s.jsx)("p",{className:"text-sm text-gray-800 mt-2",children:"このメモも一緒に画像として出力されます"})]}),(0,s.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,s.jsxs)("button",{onClick:()=>Z(!0),disabled:0===C.length,className:"flex items-center space-x-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:[(0,s.jsx)(N.Z,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"プレビュー生成"})]}),(0,s.jsxs)("button",{onClick:eo,disabled:0===C.length,className:"flex items-center space-x-2 bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:[(0,s.jsx)(w.Z,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"パターン保存"})]})]})]}),_&&C.length>0&&(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold",children:["プレビュー - ",{bar:"棒グラフ",line:"折れ線グラフ",pie:"円グラフ",composed:"複合グラフ",table:"表"}[T]]}),(0,s.jsxs)("button",{onClick:ep,disabled:I,className:"flex items-center space-x-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:bg-gray-400 transition-colors",children:[(0,s.jsx)(v.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:I?"エクスポート中...":"メモ付きエクスポート"})]})]}),(0,s.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,s.jsx)("div",{className:"p-8 text-center",children:"チャート機能は準備中です"})}),(0,s.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-medium mb-2",children:"選択中の項目:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:C.map(e=>{let t=l.find(t=>t.id===e),a=Y[e];return(0,s.jsxs)("span",{className:a?"bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm":"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:[null==t?void 0:t.name,a&&(0,s.jsx)(n.Z,{className:"inline h-3 w-3 ml-1"})]},e)})}),Object.keys(Y).length>0&&(0,s.jsx)("div",{className:"mt-3 p-2 bg-orange-100 rounded",children:(0,s.jsxs)("p",{className:"text-sm text-orange-800",children:[(0,s.jsx)(n.Z,{className:"inline h-4 w-4 mr-1"}),"異常値監視が有効です。設定された閾値を超えた値は赤色で表示されます。"]})})]})]})]}):(0,s.jsx)("div",{className:"space-y-6",children:0===V.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(c.Z,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"保存されたプロジェクトはありません"}),(0,s.jsx)("p",{className:"text-gray-800",children:"ホーム画面でプロジェクトを作成してパターンを保存してください"})]}):(0,s.jsx)("div",{className:"grid gap-6",children:V.map(e=>(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,s.jsx)("div",{className:"flex justify-between items-start mb-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:e.name}),(0,s.jsxs)("p",{className:"text-gray-800 text-sm",children:["作成: ",e.savedAt," | 最終更新: ",e.lastModified]}),(0,s.jsxs)("p",{className:"text-gray-900 text-sm mt-1",children:["パターン数: ",e.patterns.length,"個"]})]})}),e.patterns.length>0&&(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900",children:"保存されたパターン:"}),(0,s.jsx)("div",{className:"grid gap-3",children:e.patterns.map(t=>(0,s.jsxs)("div",{className:"flex gap-4 p-3 bg-gray-50 rounded-lg",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:t.chartImage?(0,s.jsx)("img",{src:t.chartImage,alt:"".concat(t.name,"のグラフ"),className:"w-24 h-20 object-cover border border-gray-300 rounded cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>ex(t),title:"クリックで拡大表示"}):(0,s.jsx)("div",{className:"w-24 h-20 bg-gray-200 border border-gray-300 rounded flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-xs text-gray-500 text-center",children:"画像なし"})})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h5",{className:"font-medium text-gray-800",children:t.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-900",children:["bar"===t.chartType?"棒グラフ":"line"===t.chartType?"折れ線グラフ":"pie"===t.chartType?"円グラフ":"composed"===t.chartType?"複合グラフ":"表"," | ",t.timestamp]}),t.memo&&(0,s.jsxs)("p",{className:"text-sm text-gray-800 mt-1 line-clamp-2",children:["メモ: ",t.memo]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("button",{onClick:()=>ex(t),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",title:"拡大表示",children:"拡大"}),(0,s.jsx)("button",{onClick:()=>eh(e.name,t),className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition-colors",children:"DL"})]})]},t.id))})]})]},e.id))})})]})})}}},function(e){e.O(0,[119,888,774,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);